(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-497ce122"],{"314f":function(t,a,e){"use strict";var s=e("3c06"),n=e.n(s);n.a},"3c06":function(t,a,e){},5094:function(t,a,e){"use strict";var s=e("9981"),n=e.n(s);n.a},"5be8":function(t,a,e){},6411:function(t,a,e){},"675a":function(t,a,e){"use strict";var s=e("6411"),n=e.n(s);n.a},9981:function(t,a,e){},"99af":function(t,a,e){"use strict";var s=e("23e7"),n=e("d039"),i=e("e8b5"),r=e("861d"),c=e("7b0b"),o=e("50c4"),l=e("8418"),u=e("65f0"),h=e("1dde"),f=e("b622"),p=e("2d00"),m=f("isConcatSpreadable"),d=9007199254740991,v="Maximum allowed index exceeded",y=p>=51||!n((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),_=h("concat"),b=function(t){if(!r(t))return!1;var a=t[m];return void 0!==a?!!a:i(t)},g=!y||!_;s({target:"Array",proto:!0,forced:g},{concat:function(t){var a,e,s,n,i,r=c(this),h=u(r,0),f=0;for(a=-1,s=arguments.length;a<s;a++)if(i=-1===a?r:arguments[a],b(i)){if(n=o(i.length),f+n>d)throw TypeError(v);for(e=0;e<n;e++,f++)e in i&&l(h,f,i[e])}else{if(f>=d)throw TypeError(v);l(h,f++,i)}return h.length=f,h}})},b0c0:function(t,a,e){var s=e("83ab"),n=e("9bf2").f,i=Function.prototype,r=i.toString,c=/^\s*function ([^ (]*)/,o="name";s&&!(o in i)&&n(i,o,{configurable:!0,get:function(){try{return r.call(this).match(c)[1]}catch(t){return""}}})},cb80:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"title_wrap"},[e("h2",{staticClass:"search_result"},[t._v(t._s(this.$route.query.result))]),e("span",{staticClass:"search_count"},[t._v("找到"+t._s(t.searchCount)+"个结果")])]),e("el-tabs",{model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"歌曲",name:"music"}},[e("search-music",{attrs:{searchData:t.searchData},on:{getUrl:t._getMusicUrl}})],1),e("el-tab-pane",{attrs:{label:"歌单",name:"playlist"}},[e("search-list",{attrs:{searchData:t.searchData}})],1),e("el-tab-pane",{attrs:{label:"MV",name:"findmv"}},[e("search-mv",{attrs:{searchData:t.searchData}})],1)],1),e("el-pagination",{attrs:{"current-page":t.pagenum,"page-size":t.limit,layout:"prev, pager, next, jumper",total:t.searchCount},on:{"current-change":t.handleCurrentChange}})],1)},n=[],i=(e("99af"),e("4160"),e("d81d"),e("b0c0"),e("159b"),e("5530")),r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.searchData}},[e("el-table-column",{attrs:{prop:"date",label:"#",width:"60",type:"index"}}),e("el-table-column",{attrs:{prop:"name",label:"音乐标题",width:"250"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"music_name",on:{dblclick:function(e){return t.getMusicUrl(a.row.id)}}},[t._v(t._s(a.row.name))]),0!=a.row.mvid?e("i",{staticClass:"iconfont"},[t._v("")]):t._e()]}}])}),e("el-table-column",{attrs:{prop:"singerName",label:"歌手"},scopedSlots:t._u([{key:"default",fn:function(a){return t._l(a.row.singerName,(function(a,s){return e("span",{key:s,staticClass:"singer_name"},[t._v(t._s(a))])}))}}])}),e("el-table-column",{attrs:{prop:"album.name",label:"专辑"}}),e("el-table-column",{attrs:{prop:"duration",label:"时长",width:"80"}})],1)},c=[],o={name:"SearchMusic",props:{searchData:{type:Array}},methods:{getMusicUrl:function(t){this.$emit("getUrl",t)}}},l=o,u=(e("314f"),e("2877")),h=Object(u["a"])(l,r,c,!1,null,"17bdb4c6",null),f=h.exports,p=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"disrecommend"},[e("ul",t._l(t.searchData,(function(a,s){return e("li",{key:s,staticClass:"item"},[e("div",{staticClass:"itemImg",on:{click:function(e){return t.goPlayListDetail(a.id)}}},[e("div",{staticClass:"desc-wrap"},[e("span",{staticClass:"desc"},[t._v("播放量: "+t._s(a.playCount))])]),e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.coverImgUrl,expression:"item.coverImgUrl"}]}),e("span",{staticClass:"iconfont"},[t._v("")])]),e("p",{staticClass:"itemName"},[t._v(t._s(a.name))])])})),0)])])},m=[],d={name:"SeachPlayList",props:{searchData:{type:Array}},methods:{goPlayListDetail:function(t){this.$router.push({path:"/playlist/".concat(t)})}}},v=d,y=(e("f0f5"),Object(u["a"])(v,p,m,!1,null,"35e1bb8e",null)),_=y.exports,b=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"newmv"},t._l(t.searchData,(function(a,s){return e("div",{key:s,staticClass:"item",on:{click:function(e){return t.goMvDetail(a.id)}}},[e("div",{staticClass:"img_wrap"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.cover,expression:"item.cover"}]}),e("span",{staticClass:"iconfont iconfont1"},[t._v("")]),e("div",{staticClass:"num_wrap"},[e("div",{staticClass:"iconfont iconfont2"},[t._v("")]),e("div",{staticClass:"num"},[t._v(t._s(a.playCount))])])]),e("div",{staticClass:"info_wrap"},[e("div",{staticClass:"name"},[t._v(t._s(a.copywriter))]),e("div",{staticClass:"singer"},[t._v(t._s(a.name))])])])})),0)},g=[],C={name:"SearchMv",props:{searchData:{type:Array}},methods:{goMvDetail:function(t){this.$router.push({path:"/newmv/".concat(t)})}}},w=C,D=(e("675a"),Object(u["a"])(w,b,g,!1,null,"5dc3e2ca",null)),k=D.exports,S=e("2353"),x=e("2f62"),j={name:"Search",data:function(){return{activeName:"music",searchData:[],searchCount:0,pagenum:1,limit:15,type:1}},components:{SearchMusic:f,SearchList:_,SearchMv:k},computed:{offset:function(){return(this.pagenum-1)*this.limit},keywords:function(){return this.$route.query.result}},created:function(){this._getSearchData(this.keywords,this.limit,this.offset,this.type)},methods:Object(i["a"])({},Object(x["c"])({setCurrentUrl:"SET_CURRENT_URL"}),{_getSearchData:function(t,a,e,s){var n=this,i="http://musicapi.leanapp.cn/search";1===this.type&&Object(S["j"])(i,t,a,e,s).then((function(t){if("OK"===t.statusText){n.searchCount=t.data.result.songCount;var a=t.data.result.songs;a.map((function(t){var a=[];t.artists.forEach((function(t){a.push(t.name)})),t.singerName=a})),a.map((function(t){var a=t.duration,e=a/1e3,s=Math.floor(e/60),n=Math.floor(e%60);s<10&&(s="0"+s),n<10&&(n="0"+n);var i="".concat(s,":").concat(n);t.duration=i})),n.searchData=a}})),1e3===this.type&&Object(S["j"])(i,t,a,e,s).then((function(t){"OK"===t.statusText&&(n.searchCount=t.data.result.playlistCount,n.searchData=t.data.result.playlists)})),1004===this.type&&Object(S["j"])(i,t,a,e,s).then((function(t){"OK"===t.statusText&&(n.searchCount=t.data.result.mvCount,n.searchData=t.data.result.mvs)}))},_getMusicUrl:function(t){var a=this,e="https://autumnfish.cn/song/url";Object(S["f"])(e,t).then((function(t){if("OK"===t.statusText){var e=t.data.data[0].url;null===e&&a.$message({message:"未查找到歌曲的音源",type:"warning",showClose:!0}),a.setCurrentUrl(e)}}))},handleCurrentChange:function(t){this.pagenum=t,this._getSearchData(this.keywords,this.limit,this.offset,this.type)}}),watch:{keywords:function(){this._getSearchData(this.keywords,this.limit,this.offset,this.type)},activeName:function(t){"music"===t&&(this.type=1),"playlist"===t&&(this.type=1e3),"findmv"===t&&(this.type=1004),this._getSearchData(this.keywords,this.limit,this.offset,this.type)}}},M=j,O=(e("5094"),Object(u["a"])(M,s,n,!1,null,"aa309732",null));a["default"]=O.exports},d81d:function(t,a,e){"use strict";var s=e("23e7"),n=e("b727").map,i=e("1dde"),r=e("ae40"),c=i("map"),o=r("map");s({target:"Array",proto:!0,forced:!c||!o},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},f0f5:function(t,a,e){"use strict";var s=e("5be8"),n=e.n(s);n.a}}]);
//# sourceMappingURL=chunk-497ce122.ca15b77b.js.map